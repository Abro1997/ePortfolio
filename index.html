<!doctype html>
<html lang="en">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <title>Mouak Abdellah ‚Äî ePortfolio</title>
    <style>
        /* ---------- Base ---------- */
        :root {
            --text: #e9ecff;
            --muted: #a6abc3;
            --accent1: #7aa2ff;
            --accent2: #b987ff;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        html {
            height: 100%;
            font-size: clamp(14px, 0.7vw + 10px, 18px);
            scroll-behavior: smooth;
        }

        body {
            height: 100%;
            font: 16px/1.6 "Inter", system-ui, sans-serif;
            color: var(--text);
            background: #0a0d1a;
            overflow-x: hidden;
            /* --- 80% global zoom --- */
        }


        @media (max-width: 900px) {
            body {
                zoom: 1;
                -moz-transform: none;
                width: 100%;
            }
        }

        /* ---------- Background & decoration ---------- */
        .bg {
            position: fixed;
            inset: 0;
            z-index: 0;
            background: linear-gradient(to bottom, #74b9ff, #a29bfe);
            transition: background 1s ease;
            overflow: hidden;
        }

        .cloud {
            position: absolute;
            pointer-events: none;
            will-change: transform, left;
            transition: opacity 0.4s ease;
            z-index: 0;
        }

            .cloud img {
                display: block;
                width: 100%;
                height: auto;
                user-select: none;
                pointer-events: none;
            }

        .star {
            position: absolute;
            background: white;
            border-radius: 50%;
            opacity: 0;
            box-shadow: 0 0 6px white;
        }

        /* ---------- Layout ---------- */
        .wrap {
            position: relative;
            z-index: 1;
            display: grid;
            grid-template-columns: 260px 1fr;
            height: 100vh;
        }

        .guide {
            position: fixed;
            left: 130px;
            top: 0;
            bottom: 0;
            width: 4px;
            background: rgba(255,255,255,0.8);
            box-shadow: 0 0 8px rgba(255,255,255,0.5);
            pointer-events: none;
            z-index: 1;
        }

        main {
            height: 100vh;
            overflow-y: scroll;
            padding: 40px 24px;
        }

        section.section {
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            position: relative;
            opacity: 0;
            transform: translateY(60px);
            transition: opacity 0.8s ease, transform 0.8s ease;
            background: transparent !important;
        }

        section.visible {
            opacity: 1;
            transform: translateY(0);
        }

        /* ---------- Elevator ---------- */
        .elevator {
            position: relative;
            z-index: 15;
            width: 100%;
        }

        .elevator-bg {
            position: absolute;
            top: 0;
            bottom: 0;
            left: 50%;
            transform: translateX(-50%);
            width: 130px; /* smaller shaft */
            background: url("assets/ElevatorBorder2.png") repeat-y center;
            background-size: 100% auto;
            image-rendering: pixelated;
            opacity: 0.75;
            z-index: 5;
        }


            .elevator-bg::after {
                content: "";
                position: absolute;
                inset: 0;
                background: linear-gradient(to top, rgba(0,0,0,0.4), rgba(0,0,0,0));
                pointer-events: none;
            }

        .elevator-inner {
            position: sticky;
            top: 0;
            height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
            pointer-events: none;
            z-index: 20;
        }

            .elevator-inner img {
    height: 200px; /* smaller elevator */
    width: auto;
    display: block;
    position: relative;
    image-rendering: pixelated;
    filter: drop-shadow(0 0 10px rgba(255,255,255,0.3));
}


        /* ---------- Cards ---------- */
        .card {
            width: min(920px, 92%);
            background: #0a0d1a;
            color: #f1f3ff;
            padding: 28px;
            border-radius: 0;
            box-shadow: 0 0 20px rgba(0,0,0,0.6);
            margin-bottom: 24px;
            border-width: 16px;
            border-image-source: url("assets/Border.png");
            border-image-slice: 16;
            border-image-repeat: repeat;
            border-image-width: 16px;
            image-rendering: pixelated;
            background-color: rgba(10, 13, 26, 0.55) !important;
        }

        #home .card, #home .slot {
            background-color: rgba(10, 13, 26, 0.35) !important;
        }

        #contact .card, #contact .slot {
            background-color: rgba(10, 13, 26, 0.8) !important;
        }

        .slot {
            background: rgba(25,28,50,0.85);
            border-radius: 14px;
            border: 1px dashed rgba(255,255,255,0.2);
            padding: 14px;
            margin-top: 12px;
            color: #f4f7ff;
        }

        .title {
            font-size: 32px;
            font-weight: 800;
            background: linear-gradient(90deg, var(--accent1), var(--accent2));
            -webkit-background-clip: text;
            background-clip: text;
            color: transparent;
            margin-bottom: 10px;
            text-shadow: 0 0 20px rgba(122,162,255,0.25);
        }

        .subtitle {
            color: var(--muted);
            margin-bottom: 16px;
        }

        /* ---------- Audio UI ---------- */
        .audio {
            position: fixed;
            left: 12px;
            top: 12px;
            z-index: 3;
            display: flex;
            align-items: center;
            gap: 10px;
            background: rgba(20,22,36,0.75);
            border: 1px solid rgba(255,255,255,0.14);
            padding: 8px 12px;
            border-radius: 12px;
            backdrop-filter: blur(6px);
        }

            .audio button {
                padding: 8px 12px;
                border-radius: 10px;
                border: 1px solid rgba(255,255,255,0.14);
                background: linear-gradient(180deg,#20253a,#12162a);
                color: #e9ecff;
                cursor: pointer;
                font-weight: 700;
            }

            .audio .status {
                font-size: 13px;
                color: var(--muted);
            }

        #gate {
            position: fixed;
            inset: 0;
            z-index: 4;
            display: none;
            align-items: center;
            justify-content: center;
            background: rgba(0,0,0,0.55);
            backdrop-filter: blur(2px);
        }

            #gate .gate-card {
                width: min(520px,92vw);
                background: rgba(15,18,40,0.9);
                padding: 24px;
                text-align: center;
                box-shadow: 0 20px 60px rgba(0,0,0,0.6);
            }

        .elevator, .elevator-inner, section.section, .wrap {
            border: none !important;
            box-shadow: none !important;
            background: none !important;
        }
        section.section {
            transform: scale(0.8);
            transform-origin: top center;
            width: 100%;
            margin: 0 auto;
        }
        main {
            overflow-x: hidden;
        }




    </style>
    

</head>
<body>
    <div class="bg" id="bg"></div>
    <div class="guide"></div>

    <audio id="bgm" loop preload="auto">
        <source src="assets/music.mp3" type="audio/mpeg">
    </audio>

    <div class="audio">
        <button id="muteBtn">Mute</button>
        <span class="status" id="audioStatus">Playing</span>
    </div>

    <div id="gate">
        <div class="gate-card">
            <h3>Enable audio?</h3>
            <p>Your browser blocked autoplay with sound. Click once to start the music.</p>
            <button id="gateBtn">‚ñ∂Ô∏è Start music</button>
        </div>
    </div>

    <div class="wrap">
            <aside class="elevator">
                <div class="elevator-bg"></div>
                <div class="elevator-inner">
                    <img src="assets/elevator.gif" alt="Elevator">
                </div>
            </aside>

            <main id="mainScroll">
                <!-- === All sections below === -->
                <!-- Keep everything identical to your content -->
                <!-- Contact -->
                <section id="contact" class="section">
                    <div class="card">
                        <h2 class="title">Contact</h2>
                        <p class="subtitle">Let‚Äôs connect or collaborate!</p>
                        <div class="slot"><strong>EMAIL:</strong> abdollah007mouak@gmail.com</div>
                    </div>
                </section>

                <!-- Careers -->
                <section id="careers" class="section">
                    <div class="card">
                        <h2 class="title">Careers</h2>
                        <p class="subtitle">Professional ambitions and future goals.</p>
                        <div class="slot" style="display:flex;flex-direction:column;align-items:center;gap:24px;text-align:center;">
                            <h3 style="font-size:1.4rem;margin-bottom:8px;color:#b987ff;">Career Goals & Presentation</h3>
                            <p style="max-width:700px;line-height:1.7;">
                                I am passionate about engineering, computer science, and innovation.
                                My goal is to contribute to cutting-edge technological projects that combine
                                analytical thinking with creativity ‚Äî whether in research, software development,
                                or simulation and modeling.
                            </p>

                            <!-- Elevator pitch video -->
                            <div style="max-width:480px;width:100%;border-radius:12px;overflow:hidden;box-shadow:0 0 20px rgba(122,162,255,0.4);">
                                <iframe id="careerVideo" width="100%" height="270"
                                        src="https://www.youtube.com/embed/kgNeXQB5Cas"
                                        title="Elevator Pitch"
                                        frameborder="0"
                                        allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share"
                                        allowfullscreen>
                                </iframe>
                            </div>


                            <!-- CV download links -->
                            <div style="display:flex;gap:20px;flex-wrap:wrap;justify-content:center;margin-top:12px;">
                                <a href="assets/CV_English.pdf" target="_blank" style="padding:10px 18px;border-radius:10px;background:linear-gradient(90deg,var(--accent1),var(--accent2));color:white;text-decoration:none;font-weight:600;box-shadow:0 0 10px rgba(122,162,255,0.4);">
                                    üìÑ View CV (English)
                                </a>
                                <a href="assets/CV_French.pdf" target="_blank" style="padding:10px 18px;border-radius:10px;background:linear-gradient(90deg,var(--accent2),var(--accent1));color:white;text-decoration:none;font-weight:600;box-shadow:0 0 10px rgba(185,135,255,0.4);">
                                    üìÑ Voir CV (Fran√ßais)
                                </a>
                            </div>
                        </div>
                    </div>
                </section>

                <!-- Interests -->
                <section id="interests" class="section">
                    <div class="card" style="max-width:1000px;">
                        <h2 class="title">Interests</h2>
                        <p class="subtitle">Passions and activities beyond engineering.</p>
                        <div class="slot" style="display:flex;flex-direction:column;align-items:center;justify-content:center;text-align:center;gap:24px;padding:32px;margin:0 auto;width:100%;max-width:820px;">
                            <div style="display:flex;gap:28px;justify-content:center;flex-wrap:wrap;">
                                <img src="assets/gamedev.jpg" alt="Game development" style="width:200px;height:auto;border-radius:12px;border:1px solid rgba(255,255,255,0.18);box-shadow:0 0 20px rgba(185,135,255,0.4);">
                                <img src="assets/sports.png" alt="Sports" style="width:200px;height:auto;border-radius:12px;border:1px solid rgba(255,255,255,0.18);box-shadow:0 0 20px rgba(122,162,255,0.4);">
                                <img src="assets/culture.png" alt="Cultural exploration" style="width:200px;height:auto;border-radius:12px;border:1px solid rgba(255,255,255,0.18);box-shadow:0 0 20px rgba(185,135,255,0.4);">
                            </div>
                            <p style="max-width:820px;line-height:1.8;font-size:1.05rem;">
                                Outside of my studies in computer science and engineering, I enjoy exploring
                                different cultures and perspectives ‚Äî something that comes naturally as an
                                international student. I‚Äôm passionate about <strong>game development</strong>,
                                <strong>art</strong>, and <strong>gaming</strong>, where creativity meets logic.
                                I also stay active through <strong>volleyball</strong>, <strong>basketball</strong>,
                                and <strong>soccer</strong> ‚Äî a sport that‚Äôs practically part of life in Morocco.
                                These interests keep me balanced between technical work, creativity, and teamwork.
                            </p>
                        </div>
                    </div>
                </section>

                <!-- Mobility -->
                <section id="mobility" class="section">
                    <div class="card">
                        <h2 class="title">Mobility</h2>
                        <p class="subtitle">International experiences and future opportunities.</p>
                        <div class="slot" style="display:flex;flex-direction:column;align-items:center;gap:24px;text-align:center;">
                            <h3 style="font-size:1.4rem;margin-bottom:8px;color:#7aa2ff;">Inspiring Career Mobility</h3>
                            <p style="max-width:740px;line-height:1.75;">
                                Oh man ‚Äî profiles like these are genuinely inspiring.
                                They show how computer science and engineering can open paths around the world,
                                and how mobility can mean both <strong>career growth</strong> and <strong>cultural exploration</strong>.
                            </p>

                            <!-- Japan -->
                            <div style="display:flex;flex-direction:column;align-items:center;gap:8px;">
                                <img src="assets/Yukihiro.jpg" alt="Yukihiro Matsumoto" style="width:160px;height:auto;border-radius:12px;box-shadow:0 0 16px rgba(122,162,255,0.4);border:1px solid rgba(255,255,255,0.2);">
                                <p style="max-width:680px;line-height:1.7;">
                                    üáØüáµ <strong>Yukihiro Matsumoto</strong> ‚Äî creator of the Ruby programming language.
                                    A Japanese engineer who built a tool used worldwide ‚Äî showing how creativity and code can cross borders.
                                </p>
                            </div>

                            <!-- Canada -->
                            <div style="display:flex;flex-direction:column;align-items:center;gap:8px;">
                                <img src="assets/Bengio.jpg" alt="Yoshua Bengio" style="width:160px;height:auto;border-radius:12px;box-shadow:0 0 16px rgba(185,135,255,0.4);border:1px solid rgba(255,255,255,0.2);">
                                <p style="max-width:680px;line-height:1.7;">
                                    üá®üá¶ <strong>Yoshua Bengio</strong> ‚Äî AI researcher and pioneer of deep learning.
                                    His work in Montr√©al connects science and innovation at a global scale.
                                </p>
                            </div>

                            <!-- USA -->
                            <div style="display:flex;flex-direction:column;align-items:center;gap:8px;">
                                <img src="assets/Altman.jpg" alt="Sam Altman" style="width:160px;height:auto;border-radius:12px;box-shadow:0 0 16px rgba(122,162,255,0.4);border:1px solid rgba(255,255,255,0.2);">
                                <p style="max-width:680px;line-height:1.7;">
                                    üá∫üá∏ <strong>Sam Altman</strong> ‚Äî entrepreneur behind major AI innovations.
                                    A reminder that ambition, technology, and vision can drive impact far beyond one‚Äôs borders.
                                </p>
                            </div>

                            <p style="max-width:740px;line-height:1.75;margin-top:16px;">
                                These <strong>international success stories</strong> reflect what inspires me most about mobility:
                                learning from diverse paths, connecting cultures, and pursuing a career that reaches beyond one country.
                            </p>
                        </div>
                    </div>
                </section>

                <!-- CSR -->
                <section id="csr" class="section">
                    <div class="card">
                        <h2 class="title">CSR / Civic Engagement</h2>
                        <p class="subtitle">Commitment to social responsibility and community values.</p>
                        <div class="slot">
                            Currently exploring opportunities for civic engagement within the ENSEEIHT community.
                            Interested in future projects related to sustainability, inclusion, and education.
                        </div>
                    </div>
                </section>

                <!-- Projects -->
                <section id="projects" class="section">
                    <div class="card">
                        <h2 class="title">Engineering Projects</h2>
                        <p class="subtitle">Concise selection aligned with my academic path and technical interests.</p>
                        <div class="slot" style="display:flex;gap:14px;align-items:center;">
                            <img src="assets/tipe.jpg" alt="TIPE cover" style="width:80px;height:80px;object-fit:contain;background:rgba(10,12,25,0.6);border-radius:12px;border:1px solid rgba(255,255,255,0.18);box-shadow:0 0 18px rgba(122,162,255,0.35);padding:6px;">
                            <div>
                                <strong>TIPE ‚Äì Yarkovsky & YORP (Python)</strong><br>
                                Modeling how solar radiation influences asteroid orbit and rotation.
                                Combined theoretical analysis with numerical simulations.
                            </div>
                        </div>

                        <div class="slot" style="display:flex;gap:14px;align-items:center;">
                            <img src="assets/unity.png" alt="Unity" style="width:90px;height:90px;object-fit:contain;background:rgba(10,12,25,0.6);border-radius:12px;border:1px solid rgba(255,255,255,0.18);box-shadow:0 0 20px rgba(185,135,255,0.4);padding:2px;">
                            <div>
                                <strong>Independent Learning ‚Äì Unity & C#</strong><br>
                                Self-taught game development: scripting gameplay, experimenting with physics and interactive systems.
                            </div>
                        </div>

                        <div class="slot" style="display:flex;gap:14px;align-items:center;">
                            <img src="assets/aseprite.png" alt="Aseprite" style="width:80px;height:80px;object-fit:contain;background:rgba(10,12,25,0.6);border-radius:12px;border:1px solid rgba(255,255,255,0.18);box-shadow:0 0 18px rgba(122,162,255,0.35);padding:4px;">
                            <div>
                                <strong>Game Jam Projects ‚Äì Aseprite & Design</strong><br>
                                Participation in collaborative jams. Pixel art production and contribution to gameplay concepts under short deadlines.
                            </div>
                        </div>

                        <div class="slot" style="display:flex;gap:14px;align-items:center;">
                            <img src="assets/csharp.png" alt="C#" style="width:90px;height:90px;object-fit:contain;background:rgba(10,12,25,0.6);border-radius:12px;border:1px solid rgba(255,255,255,0.18);box-shadow:0 0 22px rgba(185,135,255,0.35);padding:10px;">
                            <div>
                                <strong>Programming Practice (Python & C#)</strong><br>
                                Small tools and simulations to strengthen algorithms, visualization, and numerical methods.
                            </div>
                        </div>
                    </div>
                </section>

                <!-- Home -->
                <section id="home" class="section">
                    <div class="card" style="text-align:center;">
                        <img src="assets/profile.jpg" alt="Mouak Abdellah" style="width:180px;height:180px;border-radius:50%;border:2px solid rgba(255,255,255,0.2);box-shadow:0 0 25px rgba(122,162,255,0.4);margin-bottom:18px;object-fit:cover;">
                        <h1 class="title">Hi, I‚Äôm Mouak Abdellah</h1>
                        <p class="subtitle">Moroccan engineering student at <strong>ENSEEIHT Toulouse</strong>.</p>
                        <div class="slot">
                            <strong>ABOUT ME:</strong><br>
                            I obtained my <em>Baccalaur√©at</em> in 2023 and completed two years of
                            <em>Classes Pr√©paratoires aux Grandes √âcoles</em> in Morocco.<br>
                            I am now a first-year student in the engineering cycle at ENSEEIHT in Toulouse.<br><br>
                            This ePortfolio presents my academic background, mobility projects, civic engagement,
                            career goals, and personal interests.
                        </div>
                        <div class="slot">
                            <strong>CONTENTS:</strong><br>
                            ‚Ä¢ Engineering Courses & Projects<br>
                            ‚Ä¢ Mobility<br>
                            ‚Ä¢ CSR / Civic Engagement<br>
                            ‚Ä¢ Careers<br>
                            ‚Ä¢ Interests<br><br>
                            Scroll upward ‚¨ÜÔ∏è to explore.
                        </div>
                    </div>
                </section>
            </main>
        </div>
        </div>

        <script>
            const bg = document.getElementById('bg');
            const scroller = document.getElementById('mainScroll');

            // Slow down scroll wheel speed to 30%
            scroller.addEventListener("wheel", e => {
                e.preventDefault();
                scroller.scrollTop += e.deltaY * 0.30;
            }, { passive: false });

            // Start at bottom (home)
            window.addEventListener('load', () => {
                requestAnimationFrame(() => {
                    scroller.scrollTop = scroller.scrollHeight;
                });
            });

            // === Clouds ===
            const cloudImages = ["assets/cloud1.png", "assets/cloud2.png", "assets/cloud3.png", "assets/cloud4.png"];
            const NUM_CLOUDS = 9, SPAWN_MARGIN = 200, clouds = [];
            const rand = (min, max) => Math.random() * (max - min) + min;

            function makeCloud(initial = true) {
                const c = document.createElement("div");
                c.className = "cloud";
                const img = document.createElement("img");
                img.src = cloudImages[(Math.random() * cloudImages.length) | 0];
                img.alt = "cloud";
                img.style.imageRendering = "pixelated";
                img.style.opacity = (Math.random() * 0.4 + 0.55).toFixed(2);
                c.appendChild(img);

                const size = rand(110, 300);
                c.style.width = `${size}px`;
                c.style.top = `${rand(35, 85)}%`;

                const dir = Math.random() < 0.5 ? 1 : -1;
                const speed = rand(0.06, 0.18);
                c.dataset.dir = dir;
                c.dataset.speed = speed.toFixed(3);

                const vw = window.innerWidth;
                const startX = initial ? rand(-SPAWN_MARGIN, vw + SPAWN_MARGIN)
                    : (dir === 1 ? -size - SPAWN_MARGIN : vw + SPAWN_MARGIN);
                c.style.left = `${startX}px`;

                bg.appendChild(c);
                clouds.push(c);
            }
            for (let i = 0; i < NUM_CLOUDS; i++) makeCloud(true);

            function animateClouds() {
                const vw = window.innerWidth;
                clouds.forEach(c => {
                    const dir = parseFloat(c.dataset.dir);
                    const speed = parseFloat(c.dataset.speed);
                    const x = parseFloat(c.style.left) + dir * speed * 10;
                    c.style.left = `${x}px`;
                    const w = c.offsetWidth;
                    if (dir === 1 && x > vw + SPAWN_MARGIN) {
                        c.style.left = `${-w - SPAWN_MARGIN}px`;
                        c.style.top = `${rand(35, 85)}%`;
                        c.dataset.speed = rand(0.06, 0.18).toFixed(3);
                    } else if (dir === -1 && x < -w - SPAWN_MARGIN) {
                        c.style.left = `${vw + SPAWN_MARGIN}px`;
                        c.style.top = `${rand(35, 85)}%`;
                        c.dataset.speed = rand(0.06, 0.18).toFixed(3);
                    }
                });
                requestAnimationFrame(animateClouds);
            }
            animateClouds();

            // === Stars ===
            for (let i = 0; i < 100; i++) {
                const s = document.createElement('div');
                s.className = 'star';
                const size = Math.random() * 2 + 1;
                s.style.width = s.style.height = size + 'px';
                s.style.top = Math.random() * 100 + '%';
                s.style.left = Math.random() * 100 + '%';
                bg.appendChild(s);
            }

            // === Gradient & elevator motion ===
            scroller.addEventListener('scroll', e => {
                const y = e.target.scrollTop;
                const max = e.target.scrollHeight - e.target.clientHeight;
                const a = 1 - (y / max);

                const skyTop = [150, 220, 255], skyBottom = [210, 235, 255];
                const spaceTop = [5, 5, 15], spaceBottom = [10, 10, 25];
                const lerp = (p, q, t) => p + (q - p) * t;
                const mix = (c1, c2, t) =>
                    `rgb(${Math.round(lerp(c1[0], c2[0], t))},
                                  ${Math.round(lerp(c1[1], c2[1], t))},
                                  ${Math.round(lerp(c1[2], c2[2], t))})`;

                const color1 = mix(skyTop, spaceTop, a);
                const color2 = mix(skyBottom, spaceBottom, a);
                bg.style.background = `linear-gradient(to bottom, ${color1}, ${color2})`;

                document.querySelectorAll('.cloud').forEach(c => {
                    const fade = 1 - Math.max(0, Math.min((a - 0.3) / 0.3, 1));
                    c.style.opacity = fade * 0.85;
                });
                document.querySelectorAll('.star').forEach(s => {
                    const fade = Math.max(0, Math.min((a - 0.5) / 0.4, 1));
                    s.style.opacity = fade;
                });

                const shaft = document.querySelector('.elevator-bg');
                shaft.style.backgroundPositionY = `${y * 0.5}px`;
            });

            // Fade-in observer
            const sections = document.querySelectorAll('.section');
            const observer = new IntersectionObserver(entries => {
                entries.forEach(entry => {
                    if (entry.isIntersecting) entry.target.classList.add('visible');
                });
            }, { threshold: 0.2 });
            sections.forEach(s => observer.observe(s));

            // === Audio ===
            const audio = document.getElementById('bgm');
            const muteBtn = document.getElementById('muteBtn');
            const statusEl = document.getElementById('audioStatus');
            const gate = document.getElementById('gate');
            const gateBtn = document.getElementById('gateBtn');

            function setMuted(m) {
                audio.muted = m;
                muteBtn.textContent = m ? 'üîá Unmute' : 'üîä Mute';
                statusEl.textContent = (audio.paused || m) ? 'Audio ready' : 'Playing';
            }

            async function tryAutoplay() {
                try {
                    audio.volume = 0;
                    await audio.play();
                    gate.style.display = 'none';
                    setMuted(false);
                    let v = 0;
                    const fade = setInterval(() => {
                        v += 0.02;
                        if (v >= 0.15) { v = 0.15; clearInterval(fade); }
                        audio.volume = v;
                    }, 120);
                } catch {
                    gate.style.display = 'flex';
                    setMuted(true);
                }
            }

            muteBtn.addEventListener('click', async () => {
                if (audio.muted) {
                    audio.muted = false;
                    try { await audio.play(); } catch { }
                } else {
                    audio.muted = true;
                }
                setMuted(audio.muted);
            });

            gateBtn.addEventListener('click', async () => {
                audio.muted = false;
                audio.volume = 0;
                try {
                    await audio.play();
                    gate.style.display = 'none';
                    setMuted(false);
                    let target = 0.15, step = target / 30;
                    let fade = setInterval(() => {
                        if (audio.volume + step < target) audio.volume += step;
                        else { audio.volume = target; clearInterval(fade); }
                    }, 100);
                } catch (err) {
                    console.warn("Manual play failed:", err);
                }
            });

            document.addEventListener('visibilitychange', () => {
                if (!document.hidden && !audio.muted && audio.paused) {
                    audio.play().catch(() => { });
                }
            });
            // === Pause background music when career video plays ===
            const video = document.getElementById('careerVideo');
            if (video) {
                video.addEventListener('play', () => {
                    if (!audio.paused) {
                        audio.pause();
                        statusEl.textContent = 'Paused for video';
                    }
                });

                video.addEventListener('pause', () => {
                    if (audio.muted) return; // resume only if not muted
                    audio.play().catch(() => { });
                    statusEl.textContent = 'Playing';
                });

                video.addEventListener('ended', () => {
                    if (audio.muted) return;
                    audio.play().catch(() => { });
                    statusEl.textContent = 'Playing';
                });
            }
            // === Pause background music when YouTube video plays ===
            function onYouTubeIframeAPIReady() {
                const iframe = document.getElementById('careerVideo');
                if (!iframe) return;

                const player = new YT.Player(iframe, {
                    events: {
                        'onStateChange': event => {
                            if (event.data === YT.PlayerState.PLAYING) {
                                // Fade out and mute background music when video starts
                                const fadeOut = setInterval(() => {
                                    if (audio.volume > 0.02) audio.volume -= 0.02;
                                    else {
                                        audio.pause();
                                        audio.muted = true;
                                        clearInterval(fadeOut);
                                    }
                                }, 100);
                                statusEl.textContent = 'üîá Audio off (video playing)';
                                muteBtn.textContent = 'üîá Unmute';
                            } else if (event.data === YT.PlayerState.PAUSED || event.data === YT.PlayerState.ENDED) {
                                // Fade back in when video pauses/ends
                                audio.muted = false;
                                audio.volume = 0;
                                audio.play().catch(() => { });
                                let target = 0.15;
                                const fadeIn = setInterval(() => {
                                    if (audio.volume < target) audio.volume += 0.02;
                                    else clearInterval(fadeIn);
                                }, 100);
                                statusEl.textContent = 'Playing';
                                muteBtn.textContent = 'üîä Mute';
                            }


                        }
                    }
                });
            }

            // Load the YouTube IFrame API
            const tag = document.createElement('script');
            tag.src = "https://www.youtube.com/iframe_api";
            document.body.appendChild(tag);

            tryAutoplay();
        </script>
</body>
</html>
